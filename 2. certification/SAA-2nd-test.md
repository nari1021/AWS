# SAA-2nd-test 오답 정리

## 1. Amazon SQS
- 메시지 보존 기간을 1분~14일 사이의 값으로 구성할 수 있으며 기본 값은 4일이다.
- 메시지 보존 제한에 도달하면 메시지는 자동으로 삭제된다.
- 단일 Amazon SQS 메시지 대기열에는 무제한의 메시지가 포함될 수있다.
- 표준 큐의 이동 중 메시지 수는 120,000개, FIFO 큐의 경우 20,000개의 제한이 있다.

1). 표준 대기열
 - 무제한 처리량 : 표준 대기열은 API 작업당 거의 무제한의 초당 트랜잭션(TPS)을 지원
 - 최소한 한 번 전달 : 메시지가 최소한 한 번 전달되고, 가끔 2개 이상으 메시지 복사본이 전달될 수 있다.
 - 최선 노력 순서 : 가끔 메시지가 전송된 순서와 다르게 전달될 수 있다.
 - 한 번 이상 잘못된 순서로 도착하는 메시지를 애플리케이션에서 다음과 같이 처리할 수 있다면 여러 시나리오에서 표준 메시지 대기열을 사용할 수 있다.
 - 실시간 사용자 요청을 집중적 백그라운드 작업과 분리: 사용자들이 미디어 크기를 조정하거나 인코딩하면서 미디어를 업로드할 수 있게 합니다.
 - 작업을 여러 작업자 노드에 할당: 많은 수의 신용 카드 인증 요청을 처리합니다.
 - 장래 처리를 위한 메시지 배치: 데이터베이스에 여러 항목이 추가되도록 예약합니다.

2). FIFO 대기열
 - 높은 처리량 : 기본적으로 FIFO 대기열은 초당 최대 300개의 메시지(초당 300개의 전송, 수신 또는 삭제 작업)을 지원한다. 작업당 최대 10개 메시지를 일괄 처리할 경우, FIFO 대기열은 초당 3000개의 메시지까지 지원할 수 있다. 한도 증가 신청가능.
 - 정확히 한 번 처리 : 메시지가 한 번 전달되고 소비자가 이를 처리 및 삭제할 때까지 유지된다. 중복 메시지는 대기열에 올라가지 않는다.
 - 선입선출 전달 : 메시지가 전송되고 수신되는 순서가 엄격하게 지켜진다.(예: 선입선출)
 - FIFO 대기열은 다음 예와 같이 작업 및 이벤트 순서가 중요하거나 중복 항목이 허용되지 않는 경우에 애플리케이션 간 메시징을 강화해 줍니다.
 - 사용자가 입력한 명령이 올바른 순서로 실행되도록 해야 하는 경우.
 - 가격 수정을 올바른 순서로 전송하여 제품 가격을 정확히 표시해야 하는 경우.
 - 계정에 등록하기 전에 학생이 과정에 등록되는 것을 방지해야 하는 경우.

</br></br>

## 2. S3

### 1. Amazon S3 데이터 일관성 모델

Amazon S3는 모든 AWS 리전의 Amazon S3 버킷에 있는 객체의 PUT 및 DELETE 요청에 대해 강력한 쓰기 후 읽기(read-after-write) 일관성을 제공한다. 이것은 새 객체에 대한 쓰기와, 기존 객체 및 DELETE 요청을 덮어쓰는 PUT 요청 모두에 적용된다. 또한 Amazon S3 Select, Amazon S3 액세스 제어 목록(ACL), Amazon S3 객체 태그, 객체 메타데이터(예: HEAD 객체)에 대한 읽기 작업은 매우 일관적이다.

단일 키에 대한 업데이트는 원자성입니다. 예를 들어, 한 스레드에서 기존 키에 PUT 요청을 수행하고 두 번째 스레드에서 동일한 키에 GET 요청을 동시에 수행하면, 이전 데이터 또는 새 데이터는 얻지만 부분적 데이터나 손상된 데이터는 얻지 못합니다.

Amazon S3에서는 AWS 데이터 센터 내의 여러 서버로 데이터를 복제함으로써 고가용성을 구현합니다. PUT 요청이 성공하면 데이터가 안전하게 저장됩니다. 성공적인 PUT 응답을 받은 후 시작된 모든 읽기(GET 또는 LIST 요청)는 PUT 요청에 의해 쓰여진 데이터를 반환합니다. 다음은 이 동작의 예입니다.

- 프로세스가 Amazon S3로 새 객체를 쓰고 해당 버킷 내에 바로 키를 나열합니다. 새 객체가 목록에 나타납니다.
- 프로세스가 기존 객체를 대체하고 바로 읽기를 시도합니다. Amazon S3가 새 데이터를 반환합니다.
- 프로세스가 기존 객체를 삭제하고 바로 읽기를 시도합니다. 객체가 삭제되었으므로 Amazon S3는 데이터를 반환하지 않습니다.
- 프로세스가 기존 객체를 삭제하고 해당 버킷 내에 바로 키를 나열합니다. 객체가 목록에 나타나지 않습니다.
- Amazon S3는 동시 작성자에 대한 객체 잠금을 지원하지 않습니다. 두 PUT 요청을 동시에 같은 키에 대해 실행할 경우 타임스탬프가 최신인 요청이 우선 적용됩니다. 이것이 문제가 되는 경우 객체 잠금 메커니즘을 애플리케이션에 구축해야 합니다.
- 업데이트는 키를 기반으로 하므로 여러 키에서 원자성 업데이트를 수행할 방법은 없습니다. 예를 들어, 한 키의 업데이트에 의존하는 다른 키의 업데이트를 수행할 수 없습니다. 단, 이 기능을 애플리케이션에 설계해 넣는 경우는 예외입니다.


</br></br>

## 3. AWS Site-to-Site VPN

기본적으로 Amazon VPC로 시작하는 인스턴스는 자체(원격) 네트워크와 통신할 수 없습니다. AWS Site-to-Site VPN(Site-to-Site VPN) 연결을 생성하고 연결을 통해 트래픽을 전달하도록 라우팅을 구성하여 VPC에서 원격 네트워크에 대한 액세스를 활성화할 수 있습니다.

VPN 연결이라는 용어는 일반적인 용어지만 이 설명서에서 VPN 연결은 VPC와 자체 네트워크 사이의 연결을 의미합니다. Site-to-Site VPN은 인터넷 프로토콜 보안(IPsec) VPN 연결을 지원합니다.

다음은 Site-to-Site VPN의 핵심 개념입니다.

• VPN 연결: 온프레미스 장비와 VPC 간의 보안 연결입니다.
• VPN 터널: 데이터가 고객 네트워크에서 AWS와 주고받을 수 있는 암호화된 링크입니다.
• 각 VPN 연결에는 고가용성을 위해 동시에 사용할 수 있는 두 개의 VPN 터널이 포함되어 있습니다.
• 고객 게이트웨이: 고객 게이트웨이 디바이스에 대한 정보를 AWS에 제공하는 AWS 리소스입니다.
• 고객 게이트웨이 디바이스는 Site-to-Site VPN 연결을 위해 고객 측에 설치된 물리적 디바이스 또는 소프트웨어 애플리케이션입니다.

VPN 연결을 생성하려면 AWS에서 고객 게이트웨이 장치에 대한 정보를 제공하는 고객 게이트웨이 리소스를 생성해야 합니다. 다음으로 고객 게이트웨이 외부 인터페이스의 인터넷 라우팅 가능한 고정 IP 주소를 설정해야 합니다.

VPC에는 연결된 가상 프라이빗 게이트웨이가 있으며 원격 네트워크에는 고객 게이트웨이가 포함되어 있으며 VPN을 사용하도록 구성해야 합니다. 네트워크에 바인딩 된 VPC의 모든 트래픽이 가상 프라이빗 게이트웨이로 라우팅 되도록 라우팅을 설정합니다.

</br></br>

## 4. Amazon EMR

Amazon EMR은 Apache Spark, Apache Hive, Apache HBase, Apache Flink, Apache Hudi 및 Presto와 같은 오픈 소스 도구를 사용하여 방대한 양의 데이터를 처리하기 위한 업계 최고의 클라우드 빅 데이터 플랫폼입니다. EMR을 사용하면 기존 온프레미스 솔루션의 50%도 안 되는 비용으로 표준 Apache Spark보다 3배 이상 빠르게 페타바이트 규모의 분석을 실행할 수 있습니다. 단기 실행 작업의 경우 클러스터를 가동 및 중단하고 사용된 인스턴스에 따라 초 단위로 지불하면 됩니다. 장기 실행 워크로드의 경우 수요에 맞게 자동으로 규모를 조정하는 고가용성의 클러스터를 만들 수 있습니다. Apache Spark 및 Apache Hive와 같은 오픈 소스 도구의 기존 온프레미스 배포가 있는 경우 AWS Outposts에서 EMR 클러스터를 실행할 수도 있습니다.

Amazon EMR을 통해 로그 분석을 자동으로 제공 할 수 있으며, 이는 맞춤형 로그 분석 애플리케이션을 구축하고 EC2에서 호스팅하는 것보다 경제적입니다. 따라서 ELB 로그 파일을 저장하기 위한 Amazon S3와 로그 파일을 분석하기 위한 Amazon EMR 옵션이 이 둘 사이에 가장 적합합니다.

</br></br>

## 5. Amazon EC2

사용자는 Amazon EC2 인스턴스를 모니터링하고 기본 하드웨어 장애나 복구에 AWS 개입이 필요한 문제로 인해 인스턴스가 손상된 경우 인스턴스를 자동으로 복구하는 Amazon CloudWatch 경보를 만들 수 있습니다. 종료한 인스턴스는 복구할 수 없습니다. 복구된 인스턴스는 인스턴스 ID, 프라이빗 IP 주소, 탄력적 IP 주소 및 모든 인스턴스 메타데이터를 포함하여 원본 인스턴스와 동일합니다. 손상된 인스턴스가 배치 그룹에 있다면, 복구된 인스턴스는 배치 그룹에서 실행됩니다.

</br></br>

## 6. VPC

VPC(Virtual Private Cloud)는 사용자의 AWS계정 전용 가상 네트워크다.
VPC는 AWS 클라우드에서 다른 가상 네트워크와 논리적으로 분리되어 있다. Amazon EC2 인스턴스와 같은 AWS리소스를 VPC에서 실행할 수 있다.

VPC를 만들 때, VPC의 IPv4주소의 범위를 CIDR(Classless Inter-Domain Routing)블록 형태로 지정해야한다. VPC의 기본 CIDR블록은 10.0.0.0/16 과 같다.

VPC는 리전의 모든 가용 영역에 적용된다. VPC를 만든 후, 각 가용 영역에 하나 이상의 서브넷을 추가할 수있다. 필요에 따라 컴퓨팅, 스토리지, DB 및 기타 선택 서비스를 최종 사용자에게 더 가깝게 배치하는 AWS 인프라 배포인 로컬 영역에 서브넷을 추가할 수 있다. 로컬 영역을 사용하면 최종 사용자가 한 자릿 수 밀리초 지연 시간이 필요한 애플리케이션을 실행할 수 있다.

서브넷을 만들 때 해당 서브넷에 대한 CIDR 블록을 지정한다. 이는 VPC CIDR 블록의 서브넷이다. 각 서브넷은 단일 가용 영역 내에서만 존재해야하며, 여러 영역으로 확장할 수 없다. 각 가용 영역은 다른 가용 영역에서 발생한 장애를 격리시킬 수 있도록 서로 분리된 공간이다. 별도의 가용 영역에서 인스턴스를 시작함으로써 단일 위치에서 장애가 발생할 경우 애플리케이션을 보호라 수 있다. AWS는 각 서브넷에 고유 ID를 할당한다.

- 각 서브넷은 단일 가용 영역에 매핑된다.
- 생성한 모든 서브넷은 VPC의 기본 라우팅 테이블과 자동으로 연결된다.
- 서브넷 트래픽이 인터넷 게이트웨이로 라우팅되는 경우 서브넷을 퍼블릭 서브넷이라고 한다.

</br></br>

## 7. ELB

### 1. Network Load Balancer

NLB는 개방형 시스템간 상호 연결(OSI) 모델의 4계층에서 작동한다. 초당 수백만 개의 요청을 처리할 수 있다. 로드밸런서가 연결 요청을 받으면 기본 규칙의 대상 그룹에서 대상을 선택한다. 리스너 구성에 지정된 포트에서 선택한 대상에 대한 TCP 연결을 열려고 시도한다.

로드 밸런서에서 가용 영역을 활성화하면 ELB가 해당 가용 영역에서 로드 밸런서 노드를 생성한다. 기본적으로 각 로드 밸런서 노드는 해당 가용 영역의 등록된 대상에만 트래픽을 분산한다. 교차 영역 로드 밸런싱을 활성화하면 각 로드 밸런서 노드가 활성화된 모든 가용 영역에 있는 등록된 대상 간에 트래픽을 분산한다.

로드 밸런서에 대해 여러 가용 영역을 활성화하고 각 대상 그룹에 각 활성화된 가용 영역에 하나 이상의 대상이 있는지 확인하면 응용 프로그램의 내결함성이 향상된다. 예를들어, 하나 이상의 대상 그룹이 가용 영역에서 정상 대상이 없는 경우 DNS에서 해당 서브넷의 IP주소를 제거하지만 다른 가용 영역의 로드 밸런서 노드는 여전히 트래픽을 라우팅할 수 있다. 클라이언트가 TTL(Time-to-live)을 인식하지 못하고 DNS에서 제거된 IP주소로 요청을 보내면 요청이 실패한다.

### 2. Application Load Balancer

ALB는 요청 수준(7계층)에서 작동하여 트래픽을 대상으로 라우팅한다. HTTP 및 HTTPS 트래픽의 고급 로드 밸런싱에 이상적인 ALB 장치는 마이크로 서비스 및 컨테이너 기반 애플리케이션을 비롯한 최신 애플리케이션 아키텍처를 제공하는데 적합한 고급 요청 라우팅을 제공한다.
ALB는 지정된 사용 사례에서 언급된 짧은 지연 시간 및 높은 처리량 시나리오에 적합하지 않다.

### 3. Classic Load Balancer

CLB는 여러 Amazon EC2인스턴스 간에 기본 로드 밸런싱을 제공하며 요청 수준과 연결 수준 모두에서 작동한다. CLB는 EC2-Classic 네트워크 내에 구축된 애플리케이션을 위한 것이다. 기존 로드 밸런서는 지정된 사용 사례에서 언급된 짧은 지연 시간 및 처리량 시나리오에 적합하지 않다.

</br></br>

## 8. AWS Lambda

Lambda를 사용하면 서버를 프로비저닝하거나 관리할 필요 없이 코드를 실행할 수 있으며, 사용한 컴퓨팅 시간에 대해서만 비용을 지불하면 된다.

Lambda에서는 사실상 모든 유형의 애플리케이션이나 백엔드 서비스에 대한 코드를 별도의 관리 없이 실행할 수 있다. 코드를 업로드하기만 하면, Lambda에서 높은 가용성으로 코드를 실행 및 확장하는데 피룡한 모든 것을 처리한다. 다른 AWS 서비스에서 코드를 자동으로 트리거하도록 설정하거나 웹 또는 모바일 앱에서 직접 코드를 호출할 수 있다.

AWS Lambda는 함수를 실행하고 저장하는데 사용할 수 있는 컴퓨팅 및 스토리지 리소스의 양을 제한한다. 리전당 다음과 같은 한도가 적용되며 이 한도를 늘릴 수 있다. 지정된 시간 초과에 도달하면 AWS Lambda가 Lambda 함수의 실행을 종료한다. 예상 실행 시간에 따라 이 값을 설정하는 것이 좋으며, 기본 시간 초과는 3초이고 AWS Lambda의 됴청 당 최대 실행 기간은 900초(15분)이다.

</br></br>

## 9. Amazon Kinesis Data Streams

Amazon Kinesis Data Streams를 사용하여 대규모 데이터 레코드 스트림을 실시간으로 수집하고 처리할 수 있다. Kinesis Data Streams 애플리케이션이라고 알려진 데이터 처리 애플리케이션을 생성할 수 있다. 일반적으로 Kinesis Data Streams 애플리케이션은 데이터가 기록될 때 데이터 스트림에서 데이터를 읽는다. 이러한 애플리케이션은 Kinesis Client Library를 사용하며 Amazon EC2 인스턴스에서 실행될 수 있다. 처리된 레코드를 대시보드로 보내거나, 알림을 생성하는데 사용하거나, 요금 및 광고 전략을 동적으로 변경하거나, 다른 여러 AWS 제품에 데이터를 보낼 수 있다.

</br></br>


